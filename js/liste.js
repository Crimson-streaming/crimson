const itemsPerPage=48;let currentPage=1;function loadWatchlist(){let e=JSON.parse(localStorage.getItem("watchlist"))||[];e.reverse(),renderFilms(e,currentPage),renderPagination(e)}function renderFilms(e,n){const t=(n-1)*itemsPerPage,a=t+itemsPerPage,i=e.slice(t,a),s=document.getElementById("movies-container");s.innerHTML="",i.length>0?i.forEach(((e,n)=>{const a=document.createElement("div");a.classList.add("col-lg-2","col-md-3","col-sm-4","col-xs-12","col-6","single-video"),a.innerHTML=`\n                <div class="watchlist-item">\n                    <a href="#" title="Remove" onclick="removeFromWatchlist(${t+n})">\n                        <i class="fa fa-times"></i> Retirer\n                    </a>\n                </div>\n                <a href="${e.emplacement}" title="${e.nom}">\n                    <div class="video-img">\n                        <span class="video-item-content">${e.nom}</span>\n                        <img src="${e.affiche}" alt="${e.nom}" title="${e.nom}">\n                    </div>\n                </a>\n            `,s.appendChild(a)})):s.innerHTML="<p>Aucun film dans votre liste pour le moment.</p>"}function renderPagination(e){const n=Math.ceil(e.length/itemsPerPage),t=document.getElementById("pagination-links");t.innerHTML="";let a=Math.max(1,currentPage-Math.floor(5.5)),i=Math.min(n,a+11-1);if(i-a<10&&(a=Math.max(1,i-11+1)),n>1){t.innerHTML+=`\n            <li class="${1===currentPage?"disabled":""}">\n                <a class="prev page-numbers" href="#" onclick="changePage(${currentPage-1})"><i class="fa fa-caret-left"></i></a>\n            </li>\n        `;for(let e=a;e<=i;e++)t.innerHTML+=`\n                <li class="${e===currentPage?"active":""}">\n                    <a class="page-numbers" href="#" onclick="changePage(${e})">${e}</a>\n                </li>\n            `;t.innerHTML+=`\n            <li class="${currentPage===n?"disabled":""}">\n                <a class="next page-numbers" href="#" onclick="changePage(${currentPage+1})"><i class="fa fa-caret-right"></i></a>\n            </li>\n        `}}function changePage(e){const n=JSON.parse(localStorage.getItem("watchlist"))||[],t=Math.ceil(n.length/itemsPerPage);e<1||e>t||(currentPage=e,renderFilms(n,currentPage),renderPagination(n))}function showCustomAlert(e){const n=document.createElement("div");n.classList.add("custom-alert"),n.innerHTML=`\n        <img src="img/assets/icon-sweetalert.png" alt="Success" class="icon">\n        ${e}\n    `,document.body.appendChild(n),setTimeout((()=>{n.remove()}),3e3)}function removeFromWatchlist(e){let n=JSON.parse(localStorage.getItem("watchlist"))||[];const t=n.length-1-e;n.splice(t,1);localStorage.setItem("watchlist",JSON.stringify(n)),loadWatchlist(),showCustomAlert("Supprimé avec succès de votre liste")}window.onload=loadWatchlist,$(document).ready((function(){$(".video-shows-carousel").owlCarousel({loop:!1,margin:10,nav:!0,dots:!0,navText:["<i class='fas fa-angle-left'></i>","<i class='fas fa-angle-right'></i>"],responsive:{0:{items:1},600:{items:2},1e3:{items:""}}})}));